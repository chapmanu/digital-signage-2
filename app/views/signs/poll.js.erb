/*
 * JS response to poll request from sign (being displayed somewhere on campus)
 */
<% if @refresh %>
  window.location = '<%= j play_sign_path(@sign) %>';

<% elsif @sign.emergency? %>
  var $emergency_slide = $('#js-emergency-slide');
  var $new_emergency = $('<%=j render("emergency") %>');

  if ($new_emergency.text() !== $emergency_slide.text()) {
    $emergency_slide.remove();
    $('body').prepend($new_emergency);
  }

<% else %>
  // No emergencies. Remove emergency slide if present.
  var $emergency_slide = $('#js-emergency-slide');

  if ($emergency_slide.length > 0) {
    $emergency_slide.remove();
  }

<% end %>
